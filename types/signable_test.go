package types

import "testing"

func TestBasicCase(t *testing.T) {

}


/*

## Proposer:
1. Init BLS:
This node is a validator                     module=consensus addr=A3F5E824D1686842395D6F583DDF5A82813CEEEA pubKey=PubKeyEd25519{963144C3A929700C3D582D9C1A19FC120F050567AB1BE6697F50F57F2E626EF9}
BLS data                                     module=state masterPubKey="1 12a69549866450477110e561af41483299e40308a38688617d339c630bcb86cd7b7c08c2b43b1daf230c7c3684ee3a4d 23cef64acc4a7f9696afbc04b82f846f6cccd93458f254bf1a465839dd99260ebfc15c34cf94235cc7e765c406a37f90 16a359d95d1de1dbf48a654909a3c7818d34485f61892bf11fd2dd17752b81086482a4e01ef36c4f5f73c68cd9693350 14048ab7f023d435043b97d185b8a8a765d44b3179f5e383bbb8c50c2462252fe9740b24241fca6d05d7b9b7d07206ca" genDoc.BLSMasterPubKey="1 12a69549866450477110e561af41483299e40308a38688617d339c630bcb86cd7b7c08c2b43b1daf230c7c3684ee3a4d 23cef64acc4a7f9696afbc04b82f846f6cccd93458f254bf1a465839dd99260ebfc15c34cf94235cc7e765c406a37f90 16a359d95d1de1dbf48a654909a3c7818d34485f61892bf11fd2dd17752b81086482a4e01ef36c4f5f73c68cd9693350 14048ab7f023d435043b97d185b8a8a765d44b3179f5e383bbb8c50c2462252fe9740b24241fca6d05d7b9b7d07206ca"
BLS other                                    module=state id=1A757F975DE80402EC65ABA2860079940F498263 otherId=2 otherPub="1 90ffabcb7522fbe3635ae07c0bf1b7d5afcff318b147f32e14c3dc480a11fcb96a339958c6dac30b8b5b3ebc433b5a6 1b425d163493c927d1487fac00a063fdd2a1935b4ece1105b24b240de58dd8d0cef54ae5c0f82b66a37ccd844c5763a4 156ba760ff72042dce680c5f4f555318217acfd34e7f49e07b483c14fba9672bd6abadb9be6a57207d860321ae4e2185 103290a9933d2a1d2366f238993b16c85b76d7ba62d6dbd80244686e5376f5a7da3eda0b3066b6ada6c89eea88fda5d7" otherPriv=0
BLS other                                    module=state id=AC395DAD92B9DFC130A38354C2FC3E6A2FE75187 otherId=3 otherPub="1 1b9288cf64c59d7e6bfc7512ca2f61440d0b638c5d21fcfca9808771e05c3622c7bc92f24f5a6dbb898532a55711001d f854385eec65a6827de0bbf4ee7b66cb7486ae8aa8bc06864721b84f3a79466e1a4a2107ccfe1affcbaf8cac291055b 876951dbfd139db54f0ed76bc90c41d2ca9e7d57e06e81b4d0160c89fe0a0ae27323c11b4f16e7e7062302728527b59 168f0b881d7540a167fe06c564a0a5e6577bd6b7bd51c04ff96fb036059b0bb47a23e2ad0ff48cf38dbd1fe9b5c4dfdb" otherPriv=0
BLS other                                    module=state id=A3F5E824D1686842395D6F583DDF5A82813CEEEA otherId=4 otherPub="1 18a57c9cbbfefb02814130130248535f4d248b42ea0c347efa8e03e57530c7cb5e7ccad3436489d44a60f986a46ff404 db4bf142b627b95f283a031133466c1f5d3ade8e71cab8e291fc88b44a1809b225fb4ed3b1bfb0b510e11a71029289e 1d9e4ced88e60d8e77054b5cb27580af021d2d3b4378f98b48642d2f6d83f521e27384d62aaa83d82843cff6fc5216ab b89b222b70412fd651022febc76e07d30c667ea17f379d371d5bd9a12b156907420703515dd45b374a02e11bc3a5ede" otherPriv=0
BLS other                                    module=state id=1E3DAC237D29049E15002CCB79B5DFD4279FAA3F otherId=1 otherPub="1 889cfde8b2d69daed0bf4ad3e9fb6ebd14c175127567b2fae3a521300b231fcdd0379f4813150906574a4a3a0411374 c1f4810dc1941f3b24631827dc4a524ad996d23ea9d462eb30e916ce21c88ca32891e3f390d7b2dd0b993404054bbc6 1ac3d5134f093d4fb66b75791923eb2db0dfbc83536797dac57db25f70d331f7b06b769353fb8124cb43fc72bac5d033 101ebe16ab8cfb86bb10557c7b515e51b56873002cfa9832b924a38a86bf474dae2b012d3e7206357ea9a879c89d79cd" otherPriv=0
BLS keypair                                  module=state keypairId=4 keypairPub="1 18a57c9cbbfefb02814130130248535f4d248b42ea0c347efa8e03e57530c7cb5e7ccad3436489d44a60f986a46ff404 db4bf142b627b95f283a031133466c1f5d3ade8e71cab8e291fc88b44a1809b225fb4ed3b1bfb0b510e11a71029289e 1d9e4ced88e60d8e77054b5cb27580af021d2d3b4378f98b48642d2f6d83f521e27384d62aaa83d82843cff6fc5216ab b89b222b70412fd651022febc76e07d30c667ea17f379d371d5bd9a12b156907420703515dd45b374a02e11bc3a5ede" keypairPriv=172a2c4a2b90caa607a6cad6167f63c6af2a7c5d2b683130139480865e16c7b33b8c8f00bc04fd65ea7f4df63511ce84
P2P Node ID                                  module=p2p ID=1442b88ca447f03c281b95466df8a6fd623ec550 file=/root/.nsd/config/node_key.json

2. Send precommit:
Sending vote message                         module=consensus ps="PeerState{\n  Key        2f929dc085195ea474f463db2591855927fb5bb2\n  RoundState PeerRoundState{\n    1/0/RoundStepPrecommit @2019-02-28 13:39:34.818557864 +0000 UTC\n    Proposal 1:2D3ED23F2265 -> BA{1:x}\n    POL      BA{4:____} (round -1)\n    Prevotes   BA{4:xxxx}\n    Precommits BA{4:____}\n    LastCommit nil-BitArray (round -1)\n    Catchup    BA{4:____} (round -1)\n  }\n  Stats      peerStateStats{votes: 0, blockParts: 0}\n}" vote="Vote{2:A3F5E824D168 1/00/2(Precommit) ECDD5D8CFF38 861790CE2880 @ 2019-02-28T13:39:34.777984575Z BLSSignature: [90 167 40 160 206 188 59 179 33 130 20 59 21 71 22 241 164 225 33 1 219 245 199 218 249 54 235 186 38 145 82 53 20 43 71 125 0 187 66 212 24 229 68 226 142 32 192 148]}"

3. No BLS error.


## Validator:

1. Init BLS:
This node is a validator                     module=consensus addr=AC395DAD92B9DFC130A38354C2FC3E6A2FE75187 pubKey=PubKeyEd25519{0B6FBA9E663622B4B408604D3CB3EE69D4E302768EFB17C8A6D6A4CA60752FF5}
BLS data                                     module=state masterPubKey="1 10ff0260838ef1e2ca190ce4eace0681beeb279f21ac69fdef31d3bef8e80bdaf89ecbe01c2ce405c1c3596d91331ab7 19556d9f0d84bf868d52e7237c8f7131e942918b9c051ce5a82e2d0f019b960c532323bc121e8c5d728e64c86b034741 1842bb46924ddff5e3928655285b4f3537e466ca212eb137562c2c750f6d0414354127c3cf6fd26a38f78310eb925fd9 ea293f02bfefef6bc8d66e03db6694115179f6035436e4b3e32e58eb8105fde6790a4bf008e46dee663cea8b7a9ee6d" genDoc.BLSMasterPubKey="1 10ff0260838ef1e2ca190ce4eace0681beeb279f21ac69fdef31d3bef8e80bdaf89ecbe01c2ce405c1c3596d91331ab7 19556d9f0d84bf868d52e7237c8f7131e942918b9c051ce5a82e2d0f019b960c532323bc121e8c5d728e64c86b034741 1842bb46924ddff5e3928655285b4f3537e466ca212eb137562c2c750f6d0414354127c3cf6fd26a38f78310eb925fd9 ea293f02bfefef6bc8d66e03db6694115179f6035436e4b3e32e58eb8105fde6790a4bf008e46dee663cea8b7a9ee6d"
BLS other                                    module=state id=1E3DAC237D29049E15002CCB79B5DFD4279FAA3F otherId=1 otherPub="1 d66ad011ea0628dbbd8e5fb7c028e03e877a8615c4f75b38c2557213d5061ace6c4fdc686b5929c307640bc3318008e acc36b7b911c8f574b00977ab5b383e55f213c088c95215336bf513f14830eddb6ceed4d3ccee5312fc11e97bbdc4ad 10bc3a705146cb444307e272d817dd63cdd2e35564c04a7c23b6b55369d4b5d679464b62353230be891978e9281702f4 1eb97c5086b0277efe5a8df09321ab7b2401149a543d60ff39ef1e1e6ac1d4ba549ccd9f7e204c42e24e7fb11342e74d" otherPriv=0
BLS other                                    module=state id=1A757F975DE80402EC65ABA2860079940F498263 otherId=2 otherPub="1 202a417249702e26c570900bce2cd42f39146501064ae77992a6fd9fab063e8f9222a59c796d8bcde46a71a432891afd 10bc41596d547fca98a76aa7a8ec8320f523f464b87caf959d1f32d3b4ed25b2d465a714f5b6c77c235c392e4a9e1b3a 1f9679dc666780a10555b8cc30352e0a9b057f8b26f03926f229a901639be2d93d6077c9108156741b34007b4f7aaff1 20a916dbbdaf94508284be3d9c28afdf30c57bbdb6afd12195905bfe6b34e1e3da84f5eb336b388876b796a3ebeaaa03" otherPriv=0
BLS other                                    module=state id=AC395DAD92B9DFC130A38354C2FC3E6A2FE75187 otherId=3 otherPub="1 d30835b7cc1ea0d700787633b24b5688465224500fb4976854f81783562f18ff515f8728b8e8a51ba721f1b7be07d9b 3644053c462a04ad2425afef8d116162756201c16565d2c883feca3a51ce61cd732e8e166dea1d32b1ab25154b6ad71 a93fb970729129324e271cae16675e6a0d628fae3bfd14d35e3c6abe76e2bbb59718f5f1f3e074a53d219386209592d 1fc5239c8e22f1681f04e80ee6e9f2dfcadecfa092374b995fad2cc4075aa412ceab04e33e50a981a3811910b657a4a6" otherPriv=0
BLS other                                    module=state id=A3F5E824D1686842395D6F583DDF5A82813CEEEA otherId=4 otherPub="1 8236b5dece70e5fa015ee37cdc9650de866fea8b0630e287d785cd22e07aea3986c43f51e0e6424621e14c37927c669 2311a7f9b435a68418a4cc3b8071678e81ea50a25a6eb8d45ade67861c6cfe72c5046e2e434b6c1330147bfa18ec9a6b 9a6dcb678b88f72b3cd7a399d677823279c0f0bf97af275206086404c99b852b943214dbc30ed2e35d192394bb5aae7 119c09fcd777b6453245476a1e23cc80a5f46a3a0acace49820339e6808f4af78b6588c554fbcd6bf1c60ee12aee352f" otherPriv=0
BLS keypair                                  module=state keypairId=3 keypairPub="1 1b9288cf64c59d7e6bfc7512ca2f61440d0b638c5d21fcfca9808771e05c3622c7bc92f24f5a6dbb898532a55711001d f854385eec65a6827de0bbf4ee7b66cb7486ae8aa8bc06864721b84f3a79466e1a4a2107ccfe1affcbaf8cac291055b 876951dbfd139db54f0ed76bc90c41d2ca9e7d57e06e81b4d0160c89fe0a0ae27323c11b4f16e7e7062302728527b59 168f0b881d7540a167fe06c564a0a5e6577bd6b7bd51c04ff96fb036059b0bb47a23e2ad0ff48cf38dbd1fe9b5c4dfdb" keypairPriv=3539578f91725781b733273df64ef364ce22ebc0b11d3f283ce9e79232f8eb3cb555e59367d7536f6d18df156b59a41

2. Got precommit packet from proposer:
Feb 28 13:39:34 flipcoin-node2 flipd[2682]: D[28026-02-28|13:39:34.861] Read PacketMsg                               module=p2p peer=1442b88ca447f03c281b95466df8a6fd623ec550@0.0.0.0:26656 conn=MConn{159.65.255.7:26656} packet="PacketMsg{22:C1DA2D940AE80108021001220C0896C9DFE30510BFB4FCF2022A480A20ECDD5D8CFF3825B8E47380222ECC0917EBAF1DE151D53D6291C0421143C2F02B1224080112202D3ED23F22657F4C775949BD891437FF55814F141F092A68A15B7AC6504FDDEC3214A3F5E824D1686842395D6F583DDF5A82813CEEEA38024240861790CE28803A32628B1C01B1547BE3CCC41DBF2435AAC257E74F65749004B84633EE75F6BAEF8AF19FB1397F55C9A583A8CF1985907EE8F0ED17BC5679C1014A305AA728A0CEBC3BB32182143B154716F1A4E12101DBF5C7DAF936EBBA26915235142B477D00BB42D418E544E28E20C094 T:1}"
Feb 28 13:39:34 flipcoin-node2 flipd[2682]: D[28026-02-28|13:39:34.861] Received bytes                               module=p2p peer=1442b88ca447f03c281b95466df8a6fd623ec550@0.0.0.0:26656 chID=34 msgBytes=C1DA2D940AE80108021001220C0896C9DFE30510BFB4FCF2022A480A20ECDD5D8CFF3825B8E47380222ECC0917EBAF1DE151D53D6291C0421143C2F02B1224080112202D3ED23F22657F4C775949BD891437FF55814F141F092A68A15B7AC6504FDDEC3214A3F5E824D1686842395D6F583DDF5A82813CEEEA38024240861790CE28803A32628B1C01B1547BE3CCC41DBF2435AAC257E74F65749004B84633EE75F6BAEF8AF19FB1397F55C9A583A8CF1985907EE8F0ED17BC5679C1014A305AA728A0CEBC3BB32182143B154716F1A4E12101DBF5C7DAF936EBBA26915235142B477D00BB42D418E544E28E20C094
Feb 28 13:39:34 flipcoin-node2 flipd[2682]: D[28026-02-28|13:39:34.861] Receive                                      module=consensus src="Peer{MConn{159.65.255.7:26656} 1442b88ca447f03c281b95466df8a6fd623ec550 out}" chId=34 msg="[Vote Vote{2:A3F5E824D168 1/00/2(Precommit) ECDD5D8CFF38 861790CE2880 @ 2019-02-28T13:39:34.777984575Z BLSSignature: [90 167 40 160 206 188 59 179 33 130 20 59 21 71 22 241 164 225 33 1 219 245 199 218 249 54 235 186 38 145 82 53 20 43 71 125 0 187 66 212 24 229 68 226 142 32 192 148]}]"

3.BLS error:
Vote ignored and not added. BLS signature is incorrect module=consensus voteHeight=1 csHeight=1 peerID=1442b88ca447f03c281b95466df8a6fd623ec550 err="current signature is corrupt:\nsign 1 14c0208ee244e518d442bb007d472b1435529126baeb36f9dac7f5db0121e1a4f11647153b148221b33bbccea028a75a 4f4fdd393c046a0cf741f1d1d6534e8702fec9bbdba8f7898708d9f852bcf11f622713d2297834e0132dedb3c849075\naddress A3F5E824D1686842395D6F583DDF5A82813CEEEA\n pubKey 1 8236b5dece70e5fa015ee37cdc9650de866fea8b0630e287d785cd22e07aea3986c43f51e0e6424621e14c37927c669 2311a7f9b435a68418a4cc3b8071678e81ea50a25a6eb8d45ade67861c6cfe72c5046e2e434b6c1330147bfa18ec9a6b 9a6dcb678b88f72b3cd7a399d677823279c0f0bf97af275206086404c99b852b943214dbc30ed2e35d192394bb5aae7 119c09fcd777b6453245476a1e23cc80a5f46a3a0acace49820339e6808f4af78b6588c554fbcd6bf1c60ee12aee352f\nprevRandomStr \"dgaming-random-source\"\nprevRandom [100 103 97 109 105 110 103 45 114 97 110 100 111 109 45 115 111 117 114 99 101]"

 */
